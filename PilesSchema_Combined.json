{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/ova450/JsonSchemes/PilesSchemaCombined#",
  "title": "Piles Json Schema (Combined)",
  "version": "9.4.15",
  "description": "Корневая структура, содержащая массив пайлов (объединённая схема)",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "Ссылка на схему для валидации"
    },
    "piles": {
      "type": "array",
      "description": "Массив пайлов",
      "items": {
        "type": "array",
        "description": "Структура одного пайла (массив из 5 элементов)",
        "items": [
          {
            "type": "integer",
            "minimum": 1,
            "description": "ID пайла"
          },
          {
            "type": [ "string", "null" ],
            "enum": [ "vendor_", "category_", "", null ],
            "description": "Поле для фильтрации: 'vendor_', 'category_', пустая строка или null"
          },
          {
            "type": "string",
            "enum": [ "AND", "OR" ],
            "description": "Первый логический оператор"
          },
          {
            "type": "array",
            "items": {
              "type": "integer"
            },
            "description": "Массив целых чисел (могут быть отрицательными)"
          },
          {
            "type": "string",
            "enum": [ "AND", "OR" ],
            "description": "Второй логический оператор"
          }
        ],
        "minItems": 5,
        "maxItems": 5,
        "additionalItems": false,
        "comment": "Пайл всегда состоит строго из 5 элементов в заданном порядке."
      }
    }
  },
  "required": [ "piles" ],
  "additionalProperties": false,
  "comment": "Корневой объект содержит только поле 'piles' и опционально '$schema'."
}